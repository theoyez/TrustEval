<!doctype html>
<html><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>TrustEval — Run Report</title>
<link rel="stylesheet" href="../web/styles.css">
</head><body>
<header class="top">
  <a class="btn" href="../index.html">← Leaderboard</a>
  <h1>Run Report</h1>
</header>
<div class="container">
<section id="summary"></section>
<section id="items"></section>
</div>
<script>
const data = JSON.parse(unescape("{{DATA_JSON}}"));
function pct(x){ return (x==null? '—' : (x*100).toFixed(1)+'%'); }
const s = data.summary;
document.getElementById('summary').innerHTML = `
  <div class="cards">
    <div class="card" title="Mean partial-credit accuracy">Accuracy <b>${pct(s.accuracy)}</b></div>
    <div class="card" title="Per-item ▶ Domain ▶ RAG policy">Grounding <b>${pct(s.grounding)}</b></div>
    <div class="card" title="Regex packs (PII/Toxicity/Policy) with bounded penalties">Safety <b>${pct(s.safety)}</b></div>
    <div class="card primary" title="Weighted composite">Trust Score <b>${pct(s.trust_score)}</b></div>
  </div>`;
document.getElementById('items').innerHTML = data.items.map(it=>`
  <div class="card" style="margin:10px 0">
    <div><b>${it.id}</b></div>
    <div class="small">Acc ${pct(it.accuracy)} · Gnd ${pct(it.grounding)} · Safe ${pct(it.safety)} · Comp ${pct(it.composite)}</div>
    <div class="small">Cited: ${it.cited && it.cited.length ? it.cited.join(', ') : '—'}</div>
    <details class="details"><summary>Why?</summary>
      <ul>${it.why.map(x=>`<li>${x}</li>`).join('')}</ul>
    </details>
  </div>`).join('');
</script>
</body></html>
